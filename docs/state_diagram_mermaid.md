# State Diagram Mermaid Output

This document shows an example of creating a `Diagrams::StateDiagram` object and the resulting Mermaid syntax generated by the `#to_mermaid` method (added by the `mermaid-ruby` gem).

## Example Ruby Code

```ruby
require 'diagrams'
require 'mermaid' # Applies the #to_mermaid patch

# Define states
idle = Diagrams::Elements::State.new(id: 'Idle')
fetching = Diagrams::Elements::State.new(id: 'Fetching', label: 'Fetching Data')
processing = Diagrams::Elements::State.new(id: 'Processing')
error_state = Diagrams::Elements::State.new(id: 'Error', label: 'Error Occurred')
done = Diagrams::Elements::State.new(id: 'Done')

# Define transitions
t1 = Diagrams::Elements::Transition.new(source_state_id: '*', target_state_id: 'Idle') # Start state
t2 = Diagrams::Elements::Transition.new(source_state_id: 'Idle', target_state_id: 'Fetching', label: 'Fetch Request')
t3 = Diagrams::Elements::Transition.new(source_state_id: 'Fetching', target_state_id: 'Processing', label: 'Data Received')
t4 = Diagrams::Elements::Transition.new(source_state_id: 'Fetching', target_state_id: 'Error', label: 'Fetch Failed')
t5 = Diagrams::Elements::Transition.new(source_state_id: 'Processing', target_state_id: 'Done', label: 'Process OK')
t6 = Diagrams::Elements::Transition.new(source_state_id: 'Processing', target_state_id: 'Error', label: 'Process Failed')
t7 = Diagrams::Elements::Transition.new(source_state_id: 'Error', target_state_id: 'Idle', label: 'Reset')
t8 = Diagrams::Elements::Transition.new(source_state_id: 'Done', target_state_id: 'Idle', label: 'New Request / Timeout')
t9 = Diagrams::Elements::Transition.new(source_state_id: 'Done', target_state_id: '*') # End state

# Create diagram
diagram = Diagrams::StateDiagram.new(
  states: [idle, fetching, processing, error_state, done],
  transitions: [t1, t2, t3, t4, t5, t6, t7, t8, t9]
)

# Generate Mermaid syntax
mermaid_output = diagram.to_mermaid

puts mermaid_output
```

## Generated Mermaid Syntax

```mermaid
stateDiagram-v2
  Fetching : Fetching Data
  Error : Error Occurred
  [*] --> Idle
  Idle --> Fetching : Fetch Request
  Fetching --> Processing : Data Received
  Fetching --> Error : Fetch Failed
  Processing --> Done : Process OK
  Processing --> Error : Process Failed
  Error --> Idle : Reset
  Done --> Idle : New Request / Timeout
  Done --> [*]